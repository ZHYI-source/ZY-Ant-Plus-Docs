<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ADMIN端介绍 | Vue3-Antd-Plus</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/vue3-antd-plus/logo.png">
    <meta name="description" content="👍 后台管理系统提供了一个基于最新的技术栈（Vue 3、Vite、Ant Design Vue 3、JavaScript、Pinia、Hooks和vue-router）的完整开发模板，旨在帮助初学者更快地入门并加入团队开发。该模板包含了一系列功能模块，如大屏展示、自定义主题、角色用户、菜单授权、数据权限和系统参数等，并且所有模块都经过了完整的组件封装">
    
    <link rel="preload" href="/vue3-antd-plus/assets/css/0.styles.6461dfbc.css" as="style"><link rel="preload" href="/vue3-antd-plus/assets/js/app.024b13af.js" as="script"><link rel="preload" href="/vue3-antd-plus/assets/js/2.9230b497.js" as="script"><link rel="preload" href="/vue3-antd-plus/assets/js/1.b9588e70.js" as="script"><link rel="preload" href="/vue3-antd-plus/assets/js/24.5e5dc9f9.js" as="script"><link rel="prefetch" href="/vue3-antd-plus/assets/js/10.34641dd5.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/11.3eb7457c.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/12.7ed0a6c2.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/13.67185e1f.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/14.5b227dcd.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/15.3e8bb16d.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/16.46bb29d7.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/17.515cbe58.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/18.f3cc7695.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/19.58a08d7a.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/20.2badaed1.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/21.bb4c894c.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/22.cfcdfe0e.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/23.82fad17f.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/25.e8315242.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/26.42efa6b1.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/27.d9cbb8bc.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/3.1a93618e.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/4.51108671.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/5.4bd5b13e.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/6.52945561.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/7.3bc6565f.js"><link rel="prefetch" href="/vue3-antd-plus/assets/js/vendors~docsearch.bdc2fb18.js">
    <link rel="stylesheet" href="/vue3-antd-plus/assets/css/0.styles.6461dfbc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue3-antd-plus/" class="home-link router-link-active"><!----> <span class="site-name">Vue3-Antd-Plus</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue3-antd-plus/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vue3-antd-plus/guide/intro/" class="nav-link">
  文档教程
</a></div><div class="nav-item"><a href="http://admin.zhouyi.run/#/index" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线预览
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于作者" class="dropdown-title"><span class="title">关于作者</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于作者" class="mobile-dropdown-title"><span class="title">关于作者</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.zhouyi.run" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.zhouyi.run/#/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客站点
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/Z568_568" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/ZHYI-source" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue3-antd-plus/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vue3-antd-plus/guide/intro/" class="nav-link">
  文档教程
</a></div><div class="nav-item"><a href="http://admin.zhouyi.run/#/index" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线预览
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于作者" class="dropdown-title"><span class="title">关于作者</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于作者" class="mobile-dropdown-title"><span class="title">关于作者</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.zhouyi.run" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.zhouyi.run/#/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客站点
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/Z568_568" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/ZHYI-source" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vue3-antd-plus/guide/intro/" class="sidebar-link">介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/intro/#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/intro/#结构" class="sidebar-link">结构</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/intro/#截图" class="sidebar-link">截图</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开始</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>服务端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>管理端</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue3-antd-plus/guide/admin/" aria-current="page" class="active sidebar-link">ADMIN端介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#目录说明" class="sidebar-link">目录说明</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#启动项目" class="sidebar-link">启动项目</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#启动成功" class="sidebar-link">启动成功</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#项目配置" class="sidebar-link">项目配置</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#注册路由" class="sidebar-link">注册路由</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#meta配置说明" class="sidebar-link">Meta配置说明</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#多级路由" class="sidebar-link">多级路由</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#内嵌路由" class="sidebar-link">内嵌路由</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#外链路由" class="sidebar-link">外链路由</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#icon图标" class="sidebar-link">icon图标</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#添加新路由" class="sidebar-link">添加新路由</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#验证" class="sidebar-link">验证</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#菜单" class="sidebar-link">菜单</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#菜单列表生成" class="sidebar-link">菜单列表生成</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#添加新菜单" class="sidebar-link">添加新菜单</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#权限" class="sidebar-link">权限</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#后端数据库设计" class="sidebar-link">后端数据库设计</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#前端权限设计" class="sidebar-link">前端权限设计</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#前端细粒度权限-操作按钮" class="sidebar-link">前端细粒度权限（操作按钮）</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#权限总结" class="sidebar-link">权限总结</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#组件注册" class="sidebar-link">组件注册</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#样式" class="sidebar-link">样式</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#详细添加新页面" class="sidebar-link">详细添加新页面</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#代码生成功能" class="sidebar-link">代码生成功能</a></li><li class="sidebar-sub-header"><a href="/vue3-antd-plus/guide/admin/#其他" class="sidebar-link">其他</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>客户端</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="admin端介绍"><a href="#admin端介绍" class="header-anchor">#</a> ADMIN端介绍</h1> <p><a href="https://gitee.com/Z568_568/vue3-antd-plus.git" target="_blank" rel="noopener noreferrer">Vue3-Antd-Plus<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的管理端</p> <ul><li>使用 Vue 3 和 Vite 构建，具备高效的开发体验和优秀的性能表现</li> <li>集成了 Ant Design Vue 组件库，提供美观的 UI 界面和丰富的组件选项 和主题切换</li> <li>使用 Vue Router 实现路由管理，支持多层级路由和动态路由</li> <li>使用 Axios 处理 HTTP 请求，与后端进行数据交互</li> <li>集成 ECharts 图表库，展示数据统计和可视化效果</li> <li>使用 Pinia 进行状态管理，提供了一种响应式的数据流方案</li> <li>集成 Tinymce 富文本编辑器和 Vditor Markdown 编辑器，满足不同的编辑需求</li> <li>使用 hotkeys-js 提供快捷键支持，增强用户操作体验</li> <li>使用 Lodash 提供常用工具函数，简化开发流程</li> <li>集成了测试工具集 @vue/test-utils 和 vitest，方便进行单元测试</li></ul> <h2 id="目录说明"><a href="#目录说明" class="header-anchor">#</a> 目录说明</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">.</span>
├── public <span class="token comment"># 公共静态资源目录</span>
├── src <span class="token comment"># 主目录</span>
│   ├── api <span class="token comment"># 接口文件夹</span>
│   ├── assets <span class="token comment"># 资源文件</span>
│   │   ├── img <span class="token comment"># 项目存放图片的文件夹</span>
│   │   ├── styles <span class="token comment"># 项目存放公共样式的文件夹</span>
│   │   └── logo.svg <span class="token comment"># 项目logo</span>
│   ├── components <span class="token comment"># 公共组件</span>
│   ├── directives <span class="token comment"># 全局自定义指令</span>
│   ├── hooks <span class="token comment"># 全局hooks</span>
│   ├── layout <span class="token comment"># 项目布局文件夹</span>
│   ├── libs <span class="token comment"># 插件及工具类文件夹</span>
│   ├── router <span class="token comment"># 路由配置</span>
│   ├── stores <span class="token comment"># 数据仓库</span>
│   ├── views <span class="token comment"># 页面</span>
│   ├── App.vue <span class="token comment"># 入口页面</span>
│   ├── main.js <span class="token comment"># 入口js文件</span>
│   └── setting.js <span class="token comment"># 项目配置文件</span>
├── .env <span class="token comment"># 开发或者生产环境都会加载的配置文件</span>
├── .env.development <span class="token comment"># 开发环境配置文件</span>
├── .env.production <span class="token comment"># 生产环境配置文件</span>
└── vite.config.js <span class="token comment"># vite配置文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="启动项目"><a href="#启动项目" class="header-anchor">#</a> 启动项目</h2> <ol><li>安装依赖 （如果已经安装可以直接进行下一步）
切换值ADMIN客户端根目录下输入启动命令</li></ol> <div class="language-shell script line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>查看 <code>vite.config.js</code> vite配置文件内的代理地址内的<code>proxy</code>的 <code>target</code>指向的地址需要和 SERVER服务端启动成功后的地址一致,
否则会代理失败</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>   <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">//本地服务器主机名 配置后可以使用本地网络访问</span>
        <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span>
        <span class="token comment">//指定启动端口号</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3002</span><span class="token punctuation">,</span>
        <span class="token comment">//设为 true 时若端口已被占用则会直接退出，而不是尝试下一个可用端口</span>
        <span class="token literal-property property">strictPort</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token comment">//服务器启动时自动在浏览器中打开应用程序,当此值为字符串时，会被用作 URL 的路径名</span>
        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">'/v1'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">' http://localhost:3089'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token comment">// rewrite: (path) =&gt; path.replace(/^\/api/, ''),</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ol start="3"><li>切换值ADMIN客户端根目录下输入启动命令</li></ol> <div class="language-shell script line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> run dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也可以在ADMIN客户端根目录下查看<code>package.json</code>启动命令</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;preview&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite preview&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build:dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build --mode development&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build:pro&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build --mode production&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;test:unit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vitest&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="启动成功"><a href="#启动成功" class="header-anchor">#</a> 启动成功</h2> <p>端口号不一定相同，出现链接即可</p> <p>登录超级管理员账号密码：admin  admin</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token constant">VITE</span> v4<span class="token punctuation">.</span><span class="token number">2.1</span>  ready <span class="token keyword">in</span> <span class="token number">1229</span> ms

  ➜  Local<span class="token operator">:</span>   http<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">localhost:3088</span><span class="token regex-delimiter">/</span></span>
  ➜  Network<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">192.168.160.214:3088</span><span class="token regex-delimiter">/</span></span>
  ➜  Network<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">192.168.12.108:3088</span><span class="token regex-delimiter">/</span></span>
  ➜  press h to show help
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="项目配置"><a href="#项目配置" class="header-anchor">#</a> 项目配置</h2> <p>对项目全局的的配置信息, 可以自定义部分设置包括站点信息、快捷键、页脚、主题等等</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token comment">// 网站信息</span>
    <span class="token literal-property property">websiteInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ZY·Admin'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">'1.0.0'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'开箱即用的中后台管理系统'</span><span class="token punctuation">,</span>
        <span class="token comment">// logo仅支持在线地址</span>
        <span class="token comment">// logo: 'http://zhouyi.run:5222/api/public/admin/getFiles?id=5d38c26acf509bdcab4f8c677ce90088.png&amp;&amp;mimetype=image/png',</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>


    <span class="token comment">// 快捷键</span>
    <span class="token comment">// 支持快捷键 例如 ctrl+shift+s</span>
    <span class="token literal-property property">hotkey</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token string">'s'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">close</span><span class="token operator">:</span> <span class="token string">'esc'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 页脚备案信息</span>
    <span class="token literal-property property">reference</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//是否展示页脚</span>
        <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token string">'黔ICP备2022001745号-1'</span><span class="token punctuation">,</span><span class="token comment">//备案号</span>
        <span class="token literal-property property">authorization</span><span class="token operator">:</span> <span class="token string">'芒果快熟'</span><span class="token punctuation">,</span> <span class="token comment">// 站点所属机构</span>
        <span class="token literal-property property">authorizationUrl</span><span class="token operator">:</span> <span class="token string">'https://gitee.com/Z568_568'</span><span class="token punctuation">,</span> <span class="token comment">// 站点所属机构链接</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 注册的主题  fixed:true, 默认主题（必填一个）</span>
    <span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'金色沙滩'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">primaryColor</span><span class="token operator">:</span> <span class="token string">'#d2b48c'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">errorColor</span><span class="token operator">:</span> <span class="token string">'#c98a7d'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">warningColor</span><span class="token operator">:</span> <span class="token string">'#e2b14c'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">successColor</span><span class="token operator">:</span> <span class="token string">'#80b178'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">infoColor</span><span class="token operator">:</span> <span class="token string">'#d8c49a'</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'薄荷清新'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">primaryColor</span><span class="token operator">:</span> <span class="token string">'#88c7b1'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">errorColor</span><span class="token operator">:</span> <span class="token string">'#e88f78'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">warningColor</span><span class="token operator">:</span> <span class="token string">'#f0c175'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">successColor</span><span class="token operator">:</span> <span class="token string">'#85b17e'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">infoColor</span><span class="token operator">:</span> <span class="token string">'#c6d4a2'</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span>

            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token operator">...</span><span class="token operator">...</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h2 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h2> <p>配置路由守卫拦截器在<code>src/router/index.js</code> 内进行。
注册路由配置于<code>src/router/routes.js</code> 内进行。</p> <p>package.json</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.47&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;vue-router&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.1.6&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h3> <h4 id="模块说明"><a href="#模块说明" class="header-anchor">#</a> 模块说明</h4> <p>在<code>src/router/index.js</code>内配置路由守卫拦截器。</p> <p>在<code>router</code>实例中设置不同路由页面跳转后回到顶部</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 采用哈希路由模式</span>
    <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 回到顶部</span>
    <span class="token function">scrollBehavior</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> savedPosition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>savedPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> savedPosition<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    routes
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>在 beforeEach 和 afterEach 中设置相应的操作</p> <ul><li>beforeEach
设置登录状态、权限判断等等</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> searchStore <span class="token operator">=</span> <span class="token function">useSearchStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    searchStore<span class="token punctuation">.</span><span class="token function">showSearchPanel</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token comment">// 检查是否需要登录</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>requiresAuth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> isLoggedIn <span class="token operator">=</span> dbUtils<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
        <span class="token comment">// 检查用户是否已经登录</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isLoggedIn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 已经登录 访问登录页则直接跳到主页</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'login'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 已经登录 访问非登录页则需要验证权限</span>
            <span class="token keyword">const</span> permissionList <span class="token operator">=</span> dbUtils<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'perms'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 如果还未找到缓存的权限数组则返回登录页</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>permissionList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 清空所有缓存数据</span>
                dbUtils<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">// 重定向到登录页</span>
                <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">const</span> hasRoles <span class="token operator">=</span> <span class="token function">hasPermission</span><span class="token punctuation">(</span>permissionList<span class="token punctuation">,</span> to<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>hasRoles<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 有权限直接访问</span>
                <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 无权限则重定向到401</span>
            <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'401'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 未登录</span>
        <span class="token comment">// 清空所有缓存数据</span>
        dbUtils<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 重定向到登录页</span>
        <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 无需登录的页面 直接访问即可</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><ul><li>afterEach
可以设置页面浏览器标题等等</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>document<span class="token punctuation">.</span>title <span class="token operator">=</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title <span class="token operator">+</span> <span class="token string">&quot; - ZY'Admin&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="注册路由"><a href="#注册路由" class="header-anchor">#</a> 注册路由</h2> <p>在<code>src/router/routes.js</code>内配置页面路由。
路由表结构分为</p> <ul><li>frameIn 在主框架内显示</li> <li>frameOut 在主框架之外显示</li> <li>errorPage 错误页面</li></ul> <h3 id="一个路由模块包含以下结构"><a href="#一个路由模块包含以下结构" class="header-anchor">#</a> 一个路由模块包含以下结构</h3> <p>框架内的路由全部在 <code>layout</code>这个顶级组件内注册</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 系统管理&gt;用户管理 为例</span>
<span class="token keyword">const</span> frameIn <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'index'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/layout/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">/*************************************************************************************/</span>
        <span class="token comment">/********************children 建议最多 再加一级children  否则侧边栏体验不好*********************/</span>
        <span class="token comment">/*************************************************************************************/</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/sys'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'sys'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'系统管理'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'shezhi'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">requiresAuth</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/dir-users-info'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'dir-users-info'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'用户管理'</span><span class="token punctuation">,</span>
                            <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'yonghuguanli'</span><span class="token punctuation">,</span>
                            <span class="token literal-property property">requiresAuth</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                            <span class="token literal-property property">perms</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                                <span class="token string">'sys:users:list'</span><span class="token punctuation">,</span>
                                <span class="token string">'sys:users:create'</span><span class="token punctuation">,</span>
                                <span class="token string">'sys:users:update'</span><span class="token punctuation">,</span>
                                <span class="token string">'sys:users:delete'</span><span class="token punctuation">,</span>
                                <span class="token string">'sys:users:reset'</span><span class="token punctuation">,</span>
                            <span class="token punctuation">]</span><span class="token punctuation">,</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/sys/users/dir-users-info.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h2 id="meta配置说明"><a href="#meta配置说明" class="header-anchor">#</a> Meta配置说明</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/dir-demo-info'</span><span class="token punctuation">,</span>    <span class="token comment">// 页面地址（唯一）</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'dir-demo-info'</span><span class="token punctuation">,</span>     <span class="token comment">// 页面名称（唯一）</span>
      <span class="token literal-property property">hidden</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>              <span class="token comment">// 隐藏（不展示在侧边栏菜单）</span>
      <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'用户管理'</span><span class="token punctuation">,</span>       <span class="token comment">// 页面标题</span>
          <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'yonghuguanli'</span><span class="token punctuation">,</span>  <span class="token comment">// 页面图标</span>
          <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token comment">// 页面是否进行缓存 默认true</span>
          <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>           <span class="token comment">// 页面是否是外链 默认false</span>
          <span class="token literal-property property">frameSrc</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>       <span class="token comment">// 页面是否是内嵌 默认false</span>
          <span class="token literal-property property">requiresAuth</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>   <span class="token comment">// 页面是否是需要登录 默认true</span>
          <span class="token literal-property property">perms</span><span class="token operator">:</span> <span class="token punctuation">[</span>               <span class="token comment">// 页面的操作的权限列表</span>
              <span class="token string">'sys:users:list'</span><span class="token punctuation">,</span>   <span class="token comment">// 查询</span>
              <span class="token string">'sys:users:create'</span><span class="token punctuation">,</span> <span class="token comment">// 增加</span>
              <span class="token string">'sys:users:update'</span><span class="token punctuation">,</span> <span class="token comment">// 更新</span>
              <span class="token string">'sys:users:delete'</span><span class="token punctuation">,</span> <span class="token comment">// 删除</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/sys/users/dir-users-info.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">// 懒加载页面组件</span>
   <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="多级路由"><a href="#多级路由" class="header-anchor">#</a> 多级路由</h2> <p>在路由的<code>children</code>属性中增加即可</p> <h2 id="内嵌路由"><a href="#内嵌路由" class="header-anchor">#</a> 内嵌路由</h2> <p>在路由的<code>meta</code>属性中 <code>frameSrc</code>设置为 具体的内嵌地址即可</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 内嵌示例</span>
<span class="token punctuation">{</span>
   <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'homepage'</span><span class="token punctuation">,</span>
   <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'homepage'</span><span class="token punctuation">,</span>
   <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">frameSrc</span><span class="token operator">:</span> <span class="token string">'http://www.zhouyi.run/#/'</span><span class="token punctuation">,</span> <span class="token comment">// 具体内嵌地址</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'个人主页'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'wailian_icon'</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/sys/frame/dir-frame-info.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="外链路由"><a href="#外链路由" class="header-anchor">#</a> 外链路由</h2> <p>在路由的<code>meta</code>属性中 <code>link</code>设置为true,并且路由的<code>path</code>设置具体的外链地址即可</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 外链示例</span>
<span class="token punctuation">{</span>
   <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'https://gitee.com/Z568_568'</span><span class="token punctuation">,</span>
   <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'homepage'</span><span class="token punctuation">,</span>
   <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'源码'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'github'</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="icon图标"><a href="#icon图标" class="header-anchor">#</a> icon图标</h2> <ul><li>在 <strong>开发工具&gt;图标列表</strong> 页面内选取图标名称</li> <li>或者在<code>ADMIN\src\views\dev\icon\data\iconfont.json</code>中选择图标的 <code>font_class</code>的值</li></ul> <h2 id="添加新路由"><a href="#添加新路由" class="header-anchor">#</a> 添加新路由</h2> <ol><li>在<code>src/router/routes.js</code>内新增一个路由模块</li></ol> <p>示例,在<code>src/router/routes.js</code>下框架内系统管理模块下新增 <strong>用户管理页面</strong>(<code>ADMIN\src\views\sys\users\dir-users-info.vue</code>) 文件 （带有权限验证的页面）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> frameIn <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'index'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/layout/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">/*************************************************************************************/</span>
        <span class="token comment">/********************children 建议最多 再加一级children  否则侧边栏体验不好*********************/</span>
        <span class="token comment">/*************************************************************************************/</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/sys'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'sys'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'系统管理'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'shezhi'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">requiresAuth</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/dir-users-info'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'dir-users-info'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'用户管理'</span><span class="token punctuation">,</span>
                            <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'yonghuguanli'</span><span class="token punctuation">,</span>
                            <span class="token literal-property property">requiresAuth</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                            <span class="token literal-property property">perms</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                                <span class="token string">'sys:users:list'</span><span class="token punctuation">,</span>
                                <span class="token string">'sys:users:create'</span><span class="token punctuation">,</span>
                                <span class="token string">'sys:users:update'</span><span class="token punctuation">,</span>
                                <span class="token string">'sys:users:delete'</span><span class="token punctuation">,</span>
                                <span class="token string">'sys:users:reset'</span><span class="token punctuation">,</span>
                            <span class="token punctuation">]</span><span class="token punctuation">,</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/sys/users/dir-users-info.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果是增加无权限的页面，则可以将 <code>meta</code>内的 <code>requiresAuth</code>和<code>perms</code>属性去掉即可</p></div> <p>到这里你路由已经添加完成</p> <h2 id="验证"><a href="#验证" class="header-anchor">#</a> 验证</h2> <p>您可以尝试访问 <code>ip:端口/#/dir-users-info</code>出现对应组件内容即代表成功</p> <h2 id="菜单"><a href="#菜单" class="header-anchor">#</a> 菜单</h2> <p>本项目菜单列表并未做动态自定义，需要修改路由配置达到修改菜单的目的</p> <p><strong>✨待优化的一个点</strong></p> <h2 id="菜单列表生成"><a href="#菜单列表生成" class="header-anchor">#</a> 菜单列表生成</h2> <p>菜单列表的生成根据 <code>ADMIN/src/router/routes.js</code> 内配置的框架内<code>frameIn</code>路由内容进行递归生成</p> <h3 id="实现"><a href="#实现" class="header-anchor">#</a> 实现</h3> <p>具体实现方法在<code>ADMIN/src/libs/util.menu.js</code>的<code>menuList</code>函数</p> <p>里面处理的有关权限控制等，在权限有具体说明</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>useRouter<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> dbUtils <span class="token keyword">from</span> <span class="token string">&quot;./util.strotage&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 检查路由对象是否具有权限
 * @param {Array} perms - 权限列表
 * @param {Object} route - 路由对象
 * @returns {boolean} - 是否具有权限
 */</span>
<span class="token keyword">function</span> <span class="token function">hasPermission</span><span class="token punctuation">(</span><span class="token parameter">perms<span class="token punctuation">,</span> route</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>meta <span class="token operator">&amp;&amp;</span> route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>perms<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果路由对象定义了 meta 属性或者定义 meta.perms 属性，那么就根据权限值来判断是否具有权限</span>
        <span class="token keyword">return</span> perms<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">perm</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>perms<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>perm<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果路由对象没有定义 meta 属性或者没有定义 meta.perms 属性，那么默认认为具有权限，返回 true。</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 根据权限列表筛选异步路由配置
 * @param {Array} routes - 路由配置表
 * @param {Array} perms - 权限列表
 * @returns {Array} - 筛选后的路由配置
 */</span>
<span class="token keyword">function</span> <span class="token function">filterAsyncRouter</span><span class="token punctuation">(</span><span class="token parameter">routes<span class="token punctuation">,</span> perms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    routes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">route</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建临时变量 tmp  可以在后续的操作中不会修改原始的路由对象。</span>
        <span class="token keyword">const</span> tmp <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>route<span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tmp<span class="token punctuation">.</span>hidden <span class="token operator">&amp;&amp;</span> tmp<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 先对子路由进行深度筛选，确保子路由也符合权限要求</span>
            tmp<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token function">filterAsyncRouter</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>children<span class="token punctuation">,</span> perms<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> tmp<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 对于没有子路由的路由对象，直接进行权限判断</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tmp<span class="token punctuation">.</span>hidden <span class="token operator">&amp;&amp;</span> <span class="token function">hasPermission</span><span class="token punctuation">(</span>perms<span class="token punctuation">,</span> tmp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> res
<span class="token punctuation">}</span>


<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">menuList</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> asyncRoutes <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>routes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>e<span class="token punctuation">.</span>hidden<span class="token punctuation">)</span>
    <span class="token comment">//筛选路由表</span>
    <span class="token keyword">const</span> permissionList <span class="token operator">=</span> dbUtils<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'perms'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>permissionList<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 清空所有缓存数据</span>
        dbUtils<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 重置路由重新登录</span>
        <span class="token keyword">return</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> accessedRouters
    <span class="token keyword">if</span> <span class="token punctuation">(</span>permissionList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        accessedRouters <span class="token operator">=</span> asyncRoutes
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        accessedRouters <span class="token operator">=</span> <span class="token function">filterAsyncRouter</span><span class="token punctuation">(</span>asyncRoutes<span class="token punctuation">,</span> permissionList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> accessedRouters
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h2 id="添加新菜单"><a href="#添加新菜单" class="header-anchor">#</a> 添加新菜单</h2> <ul><li>需要注意的是有权限和无权限的菜单配置</li></ul> <p><a href="/vue3-antd-plus/guide/admin/#添加新路由">添加新路由</a>即可</p> <h2 id="权限"><a href="#权限" class="header-anchor">#</a> 权限</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>权限是基于 <code>RBAC</code> 的权限管理模型,对用户的权限修改后需要重新登录才能刷新用户权限</p></div> <p>项目中我采用的权限设计方案属于<strong>基于角色的访问控制</strong>（<code>Role-Based Access Control</code>，<code>RBAC</code>）。<strong><code>RBAC</code></strong> 是一种常见且广泛使用的权限管理模型，它通过将用户分配到不同的角色，然后将角色与特定的权限关联，来实现对系统资源的访问控制。</p> <p>基于<code>RBAC</code> 模型的权限设计方案有四个部分：</p> <ol><li><strong>角色（Roles）</strong>： 角色是一组用户，这些用户在系统中具有相似的权限需求。每个角色都会被分配一组权限，然后<strong>用户被分配到角色而不是直接分配权限</strong>。</li> <li><strong>权限（Permissions）</strong>： 权限定义了用户可以执行的操作或访问的资源。每个角色都会被授予一组权限，这些权限定义了该角色所能执行的操作。</li> <li><strong>用户（Users）</strong>： 用户是系统的最终操作者。每个用户都会被分配一个或多个角色（项目中没有使用多角色），这些角色决定了他们在系统中的权限。</li> <li><strong>前端路由匹配</strong> ： 前端根据用户的角色和权限信息，动态生成菜单和路由。这意味着当用户登录系统时，前端会根据用户的角色查询其对应的权限，然后根据权限配置来渲染出适当的菜单和页面。</li></ol> <p>在 <code>RBAC</code> 模型中，角色充当了用户和权限之间的中介，简化了权限管理和维护。</p> <h2 id="后端数据库设计"><a href="#后端数据库设计" class="header-anchor">#</a> 后端数据库设计</h2> <img src="http://www.zhouyi.run:3089/v1/common/files/preview/img/1692086718222.png" alt="1692086718222.png" width="100%"> <p>在上图中可以看到有张权限表里面数据都是各种操作接口的标识：</p> <p>用户查询操作 <code>sys:users:list</code>、角色查询操作 <code>sys:roles:list</code> 、权限管理查询操作<code>sys:permissions:list</code>。</p> <p>很容易看出权限基本关系是：<strong>当用户登录后再查询出角色信息，然后关联出角色对应的权限信息</strong>。</p> <h2 id="前端权限设计"><a href="#前端权限设计" class="header-anchor">#</a> 前端权限设计</h2> <p>原理：<strong>根据权限表数据和路由元信息进行匹配，然后筛选出对应的菜单</strong></p> <ol><li>路由设计</li></ol> <p>例如 下面定义了用户管理、角色管理和权限管理的菜单路由，其中的<code>meta</code>元信息中 <code>perms</code>字段配置有该菜单的所有操作权限标识</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span>
 <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/dir-users-info'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'dir-users-info'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
           <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'用户管理'</span><span class="token punctuation">,</span>
           <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'yonghuguanli'</span><span class="token punctuation">,</span>
           <span class="token literal-property property">requiresAuth</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
           <span class="token literal-property property">perms</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                   <span class="token string">'sys:users:list'</span><span class="token punctuation">,</span>
                   <span class="token string">'sys:users:create'</span><span class="token punctuation">,</span>
                   <span class="token string">'sys:users:update'</span><span class="token punctuation">,</span>
                   <span class="token string">'sys:users:delete'</span><span class="token punctuation">,</span>
                 <span class="token punctuation">]</span><span class="token punctuation">,</span>
           <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/sys/users/dir-users-info.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ol start="2"><li>检查路由对象是否具有权限</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 检查路由对象是否具有权限
 * @param {Array} perms - 权限列表
 * @param {Object} route - 路由对象
 * @returns {boolean} - 是否具有权限
 */</span>
<span class="token keyword">function</span> <span class="token function">hasPermission</span><span class="token punctuation">(</span><span class="token parameter">perms<span class="token punctuation">,</span> route</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>meta <span class="token operator">&amp;&amp;</span> route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>perms<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果路由对象定义了 meta 属性或者定义 meta.perms 属性，那么就根据权限值来判断是否具有权限</span>
        <span class="token keyword">return</span> perms<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">perm</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>perms<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>perm<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果路由对象没有定义 meta 属性或者没有定义 meta.perms 属性，那么默认认为具有权限，返回 true。</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ol start="3"><li>递归所有路由表根据权限列表筛选异步路由：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 根据权限列表筛选异步路由配置
 * @param {Array} routes - 路由配置表
 * @param {Array} perms - 权限列表
 * @returns {Array} - 筛选后的路由配置
 */</span>
<span class="token keyword">function</span> <span class="token function">filterAsyncRouter</span><span class="token punctuation">(</span><span class="token parameter">routes<span class="token punctuation">,</span> perms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    routes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">route</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建临时变量 tmp  可以在后续的操作中不会修改原始的路由对象。</span>
        <span class="token keyword">const</span> tmp <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>route<span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tmp<span class="token punctuation">.</span>hidden <span class="token operator">&amp;&amp;</span> tmp<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 先对子路由进行深度筛选，确保子路由也符合权限要求</span>
            tmp<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token function">filterAsyncRouter</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>children<span class="token punctuation">,</span> perms<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> tmp<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 对于没有子路由的路由对象，直接进行权限判断</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tmp<span class="token punctuation">.</span>hidden <span class="token operator">&amp;&amp;</span> <span class="token function">hasPermission</span><span class="token punctuation">(</span>perms<span class="token punctuation">,</span> tmp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><ol start="4"><li>生成出该用户具有权限的路由表：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">menuList</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> asyncRoutes <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>routes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>e<span class="token punctuation">.</span>hidden<span class="token punctuation">)</span>
    <span class="token comment">//筛选路由表</span>
    <span class="token keyword">const</span> permissionList <span class="token operator">=</span> dbUtils<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'perms'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>permissionList<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 清空所有缓存数据</span>
        dbUtils<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 重置路由重新登录</span>
        <span class="token keyword">return</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> accessedRouters

    <span class="token keyword">if</span> <span class="token punctuation">(</span>permissionList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果是超级管理员则无需权限验证</span>
        accessedRouters <span class="token operator">=</span> asyncRoutes
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        accessedRouters <span class="token operator">=</span> <span class="token function">filterAsyncRouter</span><span class="token punctuation">(</span>asyncRoutes<span class="token punctuation">,</span> permissionList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> accessedRouters
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ol start="5"><li>将生成好的路由表去渲染前端菜单。前端工作基本结束</li></ol> <h3 id="后端权限设计"><a href="#后端权限设计" class="header-anchor">#</a> 后端权限设计</h3> <p>原理：是对每个请求进行权限验证 <strong>每个请求前端都会携带token,基于这个信息来进行验证用户的权限</strong></p> <p>其中会经过两轮的验证：<strong>token验证</strong> 和 <strong>接口权限验证</strong> 以确保数据的安全性</p> <ol><li>首先进行<code>token</code>验证
使用<code>express-jwt</code> 来进行<code>token的身份验证</code>、然后存储用户信息和id到req对象中</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Token 身份验证中间件
 * 
 * @param {Object} req - 请求对象
 * @param {Object} res - 响应对象
 * @param {Function} next - 下一个中间件函数
 * @returns {void}
 * @throws {Error} - 如果身份验证失败，则抛出错误
 */</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">expressjwt</span><span class="token operator">:</span> jwt<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express-jwt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">tokenAuthentication</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">jwt</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">secret</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">SIGN_KEY</span><span class="token punctuation">,</span>
        <span class="token literal-property property">algorithms</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'HS256'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">requestProperty</span><span class="token operator">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">credentialsRequired</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function-variable function">getToken</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">fromHeaderOrQuerystring</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>authorization <span class="token operator">&amp;&amp;</span>
                req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>authorization<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;Bearer&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>authorization<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>query <span class="token operator">&amp;&amp;</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>token<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//抛出错误给全局错误信息处理</span>
            <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        req<span class="token punctuation">.</span>userId <span class="token operator">=</span> req<span class="token punctuation">.</span>user<span class="token punctuation">.</span>_id<span class="token punctuation">;</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> tokenAuthentication<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><ol start="2"><li>接口权限验证
将req对象中携带用户信息的user字段取出进行操作</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 验证接口权限 auth:'接口的预设权限' </span>
<span class="token comment">// 示例：checkApiPermission('sys:users:list')</span>

<span class="token keyword">const</span> <span class="token function-variable function">checkApiPermission</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">auth</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> roleInfo <span class="token operator">=</span> <span class="token keyword">await</span> RolesModel<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>user<span class="token punctuation">.</span>roleId<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>roleInfo<span class="token punctuation">)</span> <span class="token keyword">return</span> log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'该用户还未分配角色'</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>roleInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>roleInfo<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    apiResponse<span class="token punctuation">.</span><span class="token function">unauthorizedResponse</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">'您的角色已被禁用,请联系管理员'</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> <span class="token boolean">false</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// 对超级管理员或其他</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>roleInfo<span class="token punctuation">.</span>perms<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span> <span class="token operator">||</span> roleInfo<span class="token punctuation">.</span>perms<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> permissionInfo <span class="token operator">=</span> <span class="token keyword">await</span> PermissionsModel<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span> auth<span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token comment">// 权限已被禁用</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>roleInfo<span class="token punctuation">.</span>perms<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>permissionInfo<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> apiResponse<span class="token punctuation">.</span><span class="token function">unauthorizedResponse</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">'您访问的权限已被禁用，请联系管理员'</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                    <span class="token comment">// 接口验证通过，继续下一步中间件或处理程序</span>
                    <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> apiResponse<span class="token punctuation">.</span><span class="token function">unauthorizedResponse</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">'您暂时没有权限访问,请联系管理员'</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> apiResponse<span class="token punctuation">.</span><span class="token function">unauthorizedResponse</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">'接口权限验证错误'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="前端细粒度权限-操作按钮"><a href="#前端细粒度权限-操作按钮" class="header-anchor">#</a> 前端细粒度权限（操作按钮）</h2> <h3 id="自定义指令"><a href="#自定义指令" class="header-anchor">#</a> 自定义指令</h3> <p>指令：<code>v-permission=&quot;'权限标识'&quot;</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span>  v<span class="token operator">-</span>permission<span class="token operator">=</span><span class="token string">&quot;'sys:users_opt_logs:export'&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;goExport&quot;</span><span class="token operator">&gt;</span>导出<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实现原理：<code>ADMIN/src/directives/modules/permission.js</code></p> <h3 id="函数方式"><a href="#函数方式" class="header-anchor">#</a> 函数方式</h3> <p>方法：<code>hasPerms('权限标识')</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 示例</span>
<span class="token operator">&lt;</span>a<span class="token operator">-</span><span class="token keyword">switch</span> v<span class="token operator">-</span>model<span class="token operator">:</span>checked<span class="token operator">=</span><span class="token string">&quot;record.status&quot;</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;!hasPerms('sys:permissions:stop')&quot;</span>
                              checked<span class="token operator">-</span>children<span class="token operator">=</span><span class="token string">&quot;正常&quot;</span>
                              un<span class="token operator">-</span>checked<span class="token operator">-</span>children<span class="token operator">=</span><span class="token string">&quot;停用&quot;</span>
                              @change<span class="token operator">=</span><span class="token string">&quot;statusChange(record)&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>实现原理：<code>ADMIN/src/libs/util.common.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 判断本地存储用户的权限信息作对比
 * @param {string} permission 权限标识 ‘sys:demon:list’
 * @returns {Boolean} 返回true/false
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">hasPerms</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">permission</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> permissionList <span class="token operator">=</span> dbUtils<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'perms'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>permissionList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token keyword">return</span> permissionList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>permission<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="权限总结"><a href="#权限总结" class="header-anchor">#</a> 权限总结</h2> <ol><li><p>权限设计方案的缺点：</p> <p>1.1 前端页面配置繁琐： 在新增带有权限的页面时，需要在路由表和权限管理中都进行配置。这可能会导致维护时的一些不便，特别是当功能模块较多时。</p> <p>1.2 前端菜单自定义限制： 方案中的前端菜单配置可能受限于仅能控制菜单和用户的权限关系，而对于菜单的展示内容、样式、图标等方面的定制可能需要修改前端源代码，增加了定制化的复杂度。</p> <p>1.3 前后端协调： 需要确保前后端之间预设的权限标识保持一致，以避免出现不一致的情况。这需要进行前后端的密切协调，以确保权限验证的一致性。</p></li> <li><p>权限设计方案的优点：</p> <p>2.1 灵活性和可扩展性： 当系统需要新增功能或进行权限调整时，只需更新角色的权限配置，而无需逐个调整用户的权限。这种方式使得权限的调整更为集中和高效，也降低了出错的可能性。</p> <p>2.2 代码维护便捷： 将权限逻辑集中在一处，即权限管理部分，可以使代码更易于维护和理解。同时，权限的变更对其他部分的影响较小，降低了维护成本。</p></li></ol> <p>这种权限设计方案在实际应用中常用于需要管理多种角色和复杂权限控制的系统。它允许系统管理员根据不同的用户职能来配置权限，而不必关注每个用户的个体权限。这种集中式的权限管理模式有助于系统的可维护性和可扩展性。</p> <p>然而，也可以在实际应用中根据具体情况进行一些调整，以平衡灵活性和管理成本。</p> <p>例如，对于前端的菜单和页面展示定制化，也可以考虑引入一些配置文件或者从后端动态获取信息，以减少前端源代码的修改。</p> <p><strong>不明白之处或者觉得处理的不好的地方可以<a href="https://gitee.com/Z568_568/vue3-antd-plus/issues" target="_blank" rel="noopener noreferrer">留言<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，期待和各位大佬的交流😊</strong></p> <h2 id="组件注册"><a href="#组件注册" class="header-anchor">#</a> 组件注册</h2> <h3 id="按需引入"><a href="#按需引入" class="header-anchor">#</a> 按需引入</h3> <p>项目目前的组件注册机制是按需注册，是在需要用到的页面才引入。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>SmileOutlined<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons-vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>notification<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ant-design-vue'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="全局注册"><a href="#全局注册" class="header-anchor">#</a> 全局注册</h3> <p>在根目录的<code>main.js</code>文件中</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 注册全局组件</span>
app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'IconFont'</span><span class="token punctuation">,</span> IconFont<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="样式"><a href="#样式" class="header-anchor">#</a> 样式</h2> <p>在 <code>ADMIN/src/assets/styles/main.scss</code>文件内引入各种公共样式</p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">// 入口 SCSS 文件，用于导入其他 SCSS 文件</span>

<span class="token comment">/*********** Base 基础 ************/</span>
<span class="token keyword">@import</span> <span class="token string">&quot;base/reset&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">&quot;base/typography&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/*********** abstracts 变量函数 ************/</span>
<span class="token keyword">@import</span> <span class="token string">&quot;abstracts/variables&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">&quot;abstracts/mixins&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">&quot;abstracts/functions&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/*********** components 组件 ************/</span>
<span class="token keyword">@import</span> <span class="token string">&quot;components/forms&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">&quot;components/code&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/*********** layout 布局 ************/</span>
<span class="token keyword">@import</span> <span class="token string">&quot;layout/grid&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">&quot;layout/header&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">&quot;layout/footer&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">&quot;layout/sidebar&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">&quot;layout/animate&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/*********** libs 工具 ************/</span>
<span class="token keyword">@import</span> <span class="token string">&quot;libs/media&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/*********** pages 页面(主要增删改查页面)************/</span>
<span class="token keyword">@import</span> <span class="token string">&quot;pages/get&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">&quot;pages/view&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/*********** themes 主题************/</span>
<span class="token keyword">@import</span> <span class="token string">&quot;themes/theme-dark&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">&quot;themes/theme-light&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/*********** vendors 第三方库 ************/</span>
<span class="token keyword">@import</span> <span class="token string">&quot;vendors/antd-design&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="详细添加新页面"><a href="#详细添加新页面" class="header-anchor">#</a> 详细添加新页面</h2> <h3 id="无权限页面-dir-test-info"><a href="#无权限页面-dir-test-info" class="header-anchor">#</a> 无权限页面 dir-test-info</h3> <p>无权限页面是默认 <code>hidden: false</code> 展示在侧边栏</p> <ul><li><ol><li>新建新页面
<img src="/vue3-antd-plus/post/start/new-page.png" alt="new-page"></li></ol></li> <li><ol start="2"><li>配置路由
<img src="/vue3-antd-plus/post/start/new-page1.png" alt="new-page1"></li></ol></li> <li><ol start="3"><li>验证菜单
<img src="/vue3-antd-plus/post/start/new-page2.png" alt="new-page2"></li></ol></li></ul> <h3 id="有权限页面"><a href="#有权限页面" class="header-anchor">#</a> 有权限页面</h3> <p>配置有权限的页面相对需要配置多一些</p> <p>需要前后端一起加权限，权限标识可以前端确定 也可以后端确定</p> <ul><li><ol><li>新建新页面</li></ol></li></ul> <p><img src="/vue3-antd-plus/post/start/new-page.png" alt="new-page"></p> <ul><li><ol start="2"><li>配置路由</li></ol></li></ul> <p>在路由的配置中添加 <code>requiresAuth</code>和<code>perms</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
         <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'测试页面'</span><span class="token punctuation">,</span>
         <span class="token literal-property property">requiresAuth</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
         <span class="token literal-property property">perms</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">'test:page:list'</span><span class="token punctuation">,</span>
  <span class="token string">'test:page:create'</span><span class="token punctuation">,</span>
  <span class="token string">'test:page:update'</span><span class="token punctuation">,</span>
  <span class="token string">'test:page:delete'</span><span class="token punctuation">,</span>
 <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>3.前端添加权限</li></ul> <p><img src="/vue3-antd-plus/post/start/new-page3.png" alt="new-page"></p> <p><img src="/vue3-antd-plus/post/start/new-page4.png" alt="new-page"></p> <p><img src="/vue3-antd-plus/post/start/new-page5.png" alt="new-page"></p> <ul><li><ol start="4"><li>后端添加权限</li></ol></li></ul> <p>在对应的接口的控制器中添加对应的权限标识</p> <p>详细的后端添加权限标识可查看服务端文档权限说明</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 示例</span>
exports<span class="token punctuation">.</span>testList <span class="token operator">=</span> <span class="token punctuation">[</span>
    tokenAuthentication<span class="token punctuation">,</span>
    <span class="token function">checkApiPermission</span><span class="token punctuation">(</span><span class="token string">'test:page:list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><ol start="5"><li>前端给角色分配权限</li></ol></li></ul> <p><img src="/vue3-antd-plus/post/start/new-page6.png" alt="new-page"></p> <ul><li><ol start="7"><li>添加新的权限页面完成</li></ol></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>给角色编辑新权限后，需要用户重新登录才能刷新该用户权限</p></div> <h2 id="代码生成功能"><a href="#代码生成功能" class="header-anchor">#</a> 代码生成功能</h2> <p>文档如果写不清楚的，可以结合代码一起理解</p> <p>...</p> <h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <h3 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h3> <p>待补充...</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/9/2023, 7:36:21 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vue3-antd-plus/guide/server/" class="prev">
        SERVER
      </a></span> <span class="next"><a href="/vue3-antd-plus/guide/client/">
        CLIENT客户端介绍
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/vue3-antd-plus/assets/js/app.024b13af.js" defer></script><script src="/vue3-antd-plus/assets/js/2.9230b497.js" defer></script><script src="/vue3-antd-plus/assets/js/1.b9588e70.js" defer></script><script src="/vue3-antd-plus/assets/js/24.5e5dc9f9.js" defer></script>
  </body>
</html>
